# CSRF Protected Endpoint Guide

This document describes the guideline when accessing the APIs which are marked as _CSRF protected_

## Obtaining the CSRF token

To obtain the token, a request to the `/api/v1/token` endpoint needed to be made. The token generated by this endpoint is bound to different items depending on how the endpoint is called.

- When the call is unauthenticated, the token generated is bound to the session id
- When the call is authenticated, the token generated is bound to the access token which used to authenticate the call

## Validaty

The token generated has maximum validaty of 10 monutes and can be only be used once

## Providing the CSRF token

To provide a CSRF token to the protected endpoint, include a header `X-CSRF-Token` in the request as shown below:

```
GET / HTTP 1.1
Host: api.merch.xyz
X-Access-Token: REDACTED
X-CSRF-Token: <put your token here>
Content-Type: application/json; charset=utf8
.......
```
